# 第 4 部分：检索增强生成（RAG）与 Agentic RAG 的兴起

在上一部分中，我们探讨了工具如何帮助 AI 智能体与现实世界系统交互——发送电子邮件、创建工单、触发 API。

但如果模型不需要执行操作呢？
如果它只是需要访问正确的信息呢？

在许多企业场景中就是这种情况：
- 分散在各个团队的内部文档
- 没人记得是谁写的政策 PDF
- 埋在 CRM 笔记中的客户洞察
- 包含有用上下文的仪表板和电子邮件

工具在这里帮不上忙。模型需要利用你的数据进行思考。
这就是**RAG**的用武之地。

---

## 什么是 RAG？

RAG 代表**检索增强生成（Retrieval-Augmented Generation）**。
它是一种系统设计，模型在生成响应之前，会从你自己的数据中检索相关信息。

RAG 不仅依赖模型训练时学到的知识，还为其提供了访问企业系统中**实时、上下文相关信息**的途径。这使得答案更准确、更有依据且可审计。

你可能会问：
> “为什么不直接把所有数据都提供给模型？”

问题在于：
- 模型一次只能处理有限量的文本。
- 即使在这个限制内，如果包含太多无关或嘈杂的信息，模型也会难以处理。
- 这会导致响应不够聚焦，更容易出错。

---

## RAG 流程（概览）

<img width="1024" height="356" alt="image" src="https://github.com/user-attachments/assets/2e7c2384-a564-45c1-9a08-57cfb02ee435" />


实际操作中，它是这样的：

1. **数据** – 你的内部内容（PDF、电子邮件、笔记、维基）
2. **分块** – 分解为更小的部分，以便更好地索引
3. **提示 + 上下文** – 在查询时，系统检索相关片段（检索阶段）
4. **LLM** – 模型利用该上下文生成响应
5. **输出** – 结果基于你的数据，而不仅仅是模型“知道”的内容

_图片来源：https://hyperight.com/7-practical-applications-of-rag-models-and-their-impact-on-society/_

---

## 为什么 RAG 在企业 AI 中无处不在

你经常会听到这个数字：
> 根据我在客户和系统中的观察，**70% 的企业生成式 AI 用例都使用 RAG**。

RAG 对企业来说无价的原因：
- 企业知识变化频繁
- 微调模型既昂贵又缓慢
- 检索更快、更安全且更容易控制
- 它为 LLM 系统带来了结构和可追溯性
- 它适用于非结构化（文档）和半结构化（仪表板、笔记）数据

所以，与其问：
> “如何让模型掌握我们知道的一切？”
大多数团队会问：
> “如何让模型获取我们已有的信息？”

---

## RAG = LLM + 额外检索到的数据

RAG 在 2024 年成为主导模式是有原因的：
它弥合了通用 LLM 与私有、特定任务企业知识之间的差距。

从本质上讲，RAG 很简单：
- 你使用一个 LLM
- 在生成之前，向它提供额外的、检索到的信息

这使得模型更准确、更具上下文感知能力，减少了对记忆事实的依赖。
它特别适用于**问答、总结和政策查询**等任务——尤其是在法律、金融和支持等数据丰富的环境中。

难怪 2024 年被称为**“RAG 之年”**。

---

## 但现在我们正进入 Agentic 时代

RAG 不会消失，但它正在演变。

如今的系统不再只是检索一次然后生成答案。
在**Agentic 工作流**中，检索成为更广泛、动态推理循环的一部分。

智能体规划、检索、反思并再次检索——不仅仅是一次，而是在任务过程中根据需要多次进行。

这就是**Agentic RAG**的用武之地。

---

## 什么是 Agentic RAG？

<img width="1456" height="971" alt="image" src="https://github.com/user-attachments/assets/8a7347b0-2ead-4d56-9f33-ef57667d0f00" />


传统 RAG：
- 一次查询
- 一次检索
- 一次响应

它适用于独立问题，例如：
> “我们的带薪休假结转政策是什么？”

但大多数现实世界的企业工作流并非一次性的。

---

**示例：**
假设你正在为销售团队构建一个交易助手。
在单个任务中，智能体可能需要：
- 提取客户的 CRM 历史记录
- 检索其细分市场的当前定价
- 查阅区域法律条款
- 参考过去的合同条款
- 生成定制提案
- 仔细核对事实
- 记录交互

---

在**Agentic 系统**中，检索不仅仅是一个设置步骤。
它是智能体：
- 收集缺失上下文的方式
- 检查假设的方式
- 任务中途调整的方式

这意味着 RAG 成为：
- 任务中学习的工具
- 减少幻觉的方法
- 处理动态工作流的机制
- 推理与有依据的企业知识之间的桥梁

Agentic RAG 通过将检索作为模型思考过程的一部分，将检索转变为**一流的决策循环**。

---

## 作为工具的 RAG

仔细想想，RAG 也是一种**工具**。
但它不是触发操作，而是帮助智能体从大量数据中提取正确的信息。

在实践中，智能体通常会结合：
- **RAG**
- **工具**
- **规划**

……来**可靠且上下文相关地**完成复杂任务。

---

## 关于范围的说明

RAG 是一个深度且快速发展的领域——说实话，它本身就可以成为一门课程。
如果你想进一步探索：
- 我整理了一个**GitHub 仓库**，包含了关键的 RAG 论文，很好地涵盖了该领域
- 我还有一个**Agentic RAG 101 指南**

也就是说，并非每个 RAG 优化都适用于每个用例。
在我们的 6 周课程中，我们专注于帮助你理解**何时何地**每种技术才有意义，而不是盲目应用它们。

---

在下一部分中，我们将深入探讨最近最受关注的概念之一：**模型上下文协议（MCP）**。

为了充分理解它，我们建议你回顾一下**第 3 部分关于工具的内容**，因为 MCP 直接建立在该概念之上！