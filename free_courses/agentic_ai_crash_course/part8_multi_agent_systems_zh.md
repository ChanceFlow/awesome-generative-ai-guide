# 第 8 部分：多智能体系统

---

到目前为止，我们已经讨论了很多关于**单个智能体**如何行动的内容——从**工具**和**RAG**到**记忆**和**规划**。

但如果你的 Agentic 管道需要：
- 并行化任务以加快速度
- 为任务的不同部分使用不同的智能体角色
- 像团队一样将复杂性分解到各个专业单元

这就是**多智能体系统**的用武之地。

---

## 为什么使用多智能体系统？

有时，单个智能体无法胜任，因为问题需要**规模**、**专业化**或**并行思考**。

**例子：**
- 生成需要**市场洞察**、**法律审查**和**创意建议**的营销策略。
- 构建需要**提取信息**、**标记风险**和**交叉检查政策**的合规助手。
- 自动化销售流程，其中**一个智能体**与用户沟通，**另一个**丰富数据，**第三个**处理后续跟进。

你可以用一个强大的智能体完成这些吗？
**也许可以。**

但将其拆分为**多个专业智能体**可以实现：
- **并行化** → 智能体同时处理任务的不同部分
- **专业化** → 一个智能体擅长法律术语，另一个擅长写电子邮件
- **工具独立性** → 每个智能体可以有自己的工具和记忆

---

## 扁平化 vs 分层智能体协调

所有多智能体系统都需要某种**协调**方式。
两种常见的通信模式：
<img width="1144" height="626" alt="image" src="https://github.com/user-attachments/assets/c6e2c1c0-bb92-48c8-ba53-dfbfdc6e3926" />


---

### 1. 分层模式（更可控）

**协调器智能体**将子任务委托给其他智能体。
它看到全局并控制流程。

**适用场景：**
- 任务可以清晰分解
- 你想要严格控制
- 你有已知的智能体角色（例如，总结者、生成者、检查者）

**思考：** 企业工作流、工具套件、并行管道。

---

### 2. 扁平化模式（更动态）

智能体作为**对等方**相互通信——没有老板。

**适用场景：**
- 任务需要创造力或辩论
- 你希望智能体相互评估
- 没有一个“正确”的答案路径

**思考：** 头脑风暴、排名选项、多视角推理。

---

## 没人告诉你的事：多智能体系统很痛苦

在理论上，这听起来很棒。
当然，你可以快速构建多智能体原型并从中获得乐趣。

但对于**客户/企业**用例……这很痛苦。

大多数人阅读关于多智能体系统的博客后，会对模块化感到兴奋——
> “这就像微服务！”他们说。

但**AI 智能体不是微服务**。

与代码不同，AI 模型是**非确定性的**。它们并不总是表现相同。
添加更多智能体意味着：
- 更多**非确定性**（智能体之间的差异，而不仅仅是单个智能体内部）
- 更多**记忆和状态复杂性**（谁知道什么，什么时候知道？）
- 更高的**延迟**和**成本**
- 更多**协调错误**和故障点
- 更多**共谋**，即智能体在不应该达成一致时达成一致（比你想象的更常见）

老实说，我可以写一本书来讲述让多智能体系统可靠运行有多痛苦。

---

## 那么……你应该使用它们吗？

我的个人原则：
> **在企业中，不要从多智能体开始。从一个智能体开始。**

让那个**单一智能体**失败——无论是通过评估指标还是实际操作——然后再扩展。

根据我的经验，**70% 以上的企业用例**使用单个设计良好的智能体就足够了——一个使用**工具**、**记忆**、**RAG**和**规划**的智能体。

---

### 多智能体系统在以下情况下表现出色：
- 任务足够大，需要**并行执行**
- 你需要**明确的专业化**
- 你想要**创意辩论**、评估或分布式决策

即便如此，你也需要**强大的设计**——尤其是在**记忆**、**状态**和**通信协议**方面。

---

## 最后一句话：始终以问题为先

这是我们从第一天起的口头禅：
> 不要因为听起来“Agentic”就构建多智能体系统。
> 只有当你的问题需要时，才构建它。

唯一的判断方法是：
- 有正确的**指标**
- 测试
- 让更简单的系统先失败

---

## 接下来

在下一部分中，我们将讨论**现实世界中的智能体**及其工作方式。